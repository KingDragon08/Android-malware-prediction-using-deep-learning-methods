.class public Lcom/nom/lib/manager/YGLogManager;
.super Ljava/lang/Object;
.implements Lcom/nom/lib/ws/request/WSRequest$IWSRequestCallback;
.source "YGLogManager.java"

.annotation system Ldalvik/annotation/MemberClasses;
    value = {
        Lcom/nom/lib/manager/YGLogManager$AddLogTask;,
        Lcom/nom/lib/manager/YGLogManager$PostCachedLogsTask;,
        Lcom/nom/lib/manager/YGLogManager$PostLogsTask;
    }
.end annotation

.field private final static STAY_CHECK_INTERVAL:I = 30

.field private final static WHERE_COLUMN:Ljava/lang/String; = "_id="

.field private static mInstance:Lcom/nom/lib/manager/YGLogManager;

.field private mApplication:Lcom/nom/lib/app/YGApplication;

.field private mDatabase:Landroid/database/sqlite/SQLiteDatabase;

.field private mLock:Ljava/lang/Object;

.field private mRequestQueue:Ljava/util/HashMap;
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "Ljava/util/HashMap",
            "<",
            "Lcom/nom/lib/ws/request/WSRequest;",
            "Ljava/lang/Long;",
            ">;"
        }
    .end annotation
.end field

.method static constructor <clinit>()V
    .registers 1
    .prologue
    .line 33
    const/4 v0, 0
    sput-object v0, Lcom/nom/lib/manager/YGLogManager;->mInstance:Lcom/nom/lib/manager/YGLogManager;
    .line 24
    return-void
.end method

.method public constructor <init>(Lcom/nom/lib/app/YGApplication;)V
    .registers 5
    .prologue
    .line 44
    invoke-direct { p0 }, Ljava/lang/Object;-><init>()V
    .line 27
    const/4 v1, 0
    iput-object v1, p0, Lcom/nom/lib/manager/YGLogManager;->mDatabase:Landroid/database/sqlite/SQLiteDatabase;
    .line 29
    new-instance v1, Ljava/lang/Object;
    invoke-direct { v1 }, Ljava/lang/Object;-><init>()V
    iput-object v1, p0, Lcom/nom/lib/manager/YGLogManager;->mLock:Ljava/lang/Object;
    .line 31
    new-instance v1, Ljava/util/HashMap;
    invoke-direct { v1 }, Ljava/util/HashMap;-><init>()V
    iput-object v1, p0, Lcom/nom/lib/manager/YGLogManager;->mRequestQueue:Ljava/util/HashMap;
    .line 45
    if-nez p1, :L0
    .line 46
    new-instance v1, Ljava/lang/IllegalArgumentException;
    const-string v2, "The argument 'context' cannot be null"
    invoke-direct { v1, v2 }, Ljava/lang/IllegalArgumentException;-><init>(Ljava/lang/String;)V
    throw v1
    :L0
    .line 49
    iput-object p1, p0, Lcom/nom/lib/manager/YGLogManager;->mApplication:Lcom/nom/lib/app/YGApplication;
    .line 50
    iget-object v1, p0, Lcom/nom/lib/manager/YGLogManager;->mApplication:Lcom/nom/lib/app/YGApplication;
    invoke-virtual { v1 }, Lcom/nom/lib/app/YGApplication;->getWritableDatabase()Landroid/database/sqlite/SQLiteDatabase;
    move-result-object v1
    iput-object v1, p0, Lcom/nom/lib/manager/YGLogManager;->mDatabase:Landroid/database/sqlite/SQLiteDatabase;
    .line 53
    invoke-direct { p0 }, Lcom/nom/lib/manager/YGLogManager;->resetStatusInCaches()V
    .line 56
    new-instance v0, Lcom/nom/lib/manager/YGLogManager$PostCachedLogsTask;
    invoke-direct { v0, p0 }, Lcom/nom/lib/manager/YGLogManager$PostCachedLogsTask;-><init>(Lcom/nom/lib/manager/YGLogManager;)V
    .line 57
    .local v0, task:Lcom/nom/lib/manager/YGLogManager$PostCachedLogsTask;
    invoke-virtual { v0 }, Lcom/nom/lib/manager/YGLogManager$PostCachedLogsTask;->start()V
    .line 58
    return-void
.end method

.method static synthetic access$0(Lcom/nom/lib/manager/YGLogManager;Ljava/lang/String;Ljava/lang/String;J)J
    .registers 7
    .prologue
    .line 90
    invoke-direct { p0, p1, p2, p3, p4 }, Lcom/nom/lib/manager/YGLogManager;->saveLog(Ljava/lang/String;Ljava/lang/String;J)J
    move-result-wide v0
    return-wide v0
.end method

.method static synthetic access$1(Lcom/nom/lib/manager/YGLogManager;)V
    .registers 1
    .prologue
    .line 116
    invoke-direct { p0 }, Lcom/nom/lib/manager/YGLogManager;->submitLogs()V
    return-void
.end method

.method static synthetic access$2(Lcom/nom/lib/manager/YGLogManager;)V
    .registers 1
    .prologue
    .line 206
    invoke-direct { p0 }, Lcom/nom/lib/manager/YGLogManager;->submitCachedLogs()V
    return-void
.end method

.method public static createInstance(Lcom/nom/lib/app/YGApplication;)V
    .registers 2
    .prologue
    .line 36
    new-instance v0, Lcom/nom/lib/manager/YGLogManager;
    invoke-direct { v0, p0 }, Lcom/nom/lib/manager/YGLogManager;-><init>(Lcom/nom/lib/app/YGApplication;)V
    sput-object v0, Lcom/nom/lib/manager/YGLogManager;->mInstance:Lcom/nom/lib/manager/YGLogManager;
    .line 37
    return-void
.end method

.method public static getInstance()Lcom/nom/lib/manager/YGLogManager;
    .registers 1
    .prologue
    .line 40
    sget-object v0, Lcom/nom/lib/manager/YGLogManager;->mInstance:Lcom/nom/lib/manager/YGLogManager;
    return-object v0
.end method

.method private onErrorSubmitLogs(J)V
    .catchall { :L0 .. :L2 } :L1
    .registers 9
    .prologue
    .line 283
    iget-object v2, p0, Lcom/nom/lib/manager/YGLogManager;->mLock:Ljava/lang/Object;
    monitor-enter v2
    :L0
    .line 284
    new-instance v3, Ljava/lang/StringBuilder;
    const-string v4, "_id="
    invoke-direct { v3, v4 }, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V
    invoke-virtual { v3, p1, p2 }, Ljava/lang/StringBuilder;->append(J)Ljava/lang/StringBuilder;
    move-result-object v3
    invoke-virtual { v3 }, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
    move-result-object v1
    .line 285
    .local v1, where:Ljava/lang/String;
    new-instance v0, Landroid/content/ContentValues;
    invoke-direct { v0 }, Landroid/content/ContentValues;-><init>()V
    .line 286
    .local v0, values:Landroid/content/ContentValues;
    const-string v3, "status"
    const/4 v4, -1
    invoke-static { v4 }, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;
    move-result-object v4
    invoke-virtual { v0, v3, v4 }, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/Integer;)V
    .line 289
    iget-object v3, p0, Lcom/nom/lib/manager/YGLogManager;->mDatabase:Landroid/database/sqlite/SQLiteDatabase;
    const-string v4, "app_log_cached"
    const/4 v5, 0
    invoke-virtual { v3, v4, v0, v1, v5 }, Landroid/database/sqlite/SQLiteDatabase;->update(Ljava/lang/String;Landroid/content/ContentValues;Ljava/lang/String;[Ljava/lang/String;)I
    .line 283
    monitor-exit v2
    .line 291
    return-void
    :L1
    .line 283
    .end local v0
    .end local v1
    move-exception v3
    monitor-exit v2
    :L2
    throw v3
.end method

.method private onSuccessSubmitLogs(J)V
    .catchall { :L0 .. :L2 } :L1
    .registers 8
    .prologue
    .line 274
    iget-object v1, p0, Lcom/nom/lib/manager/YGLogManager;->mLock:Ljava/lang/Object;
    monitor-enter v1
    :L0
    .line 275
    new-instance v2, Ljava/lang/StringBuilder;
    const-string v3, "_id="
    invoke-direct { v2, v3 }, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V
    invoke-virtual { v2, p1, p2 }, Ljava/lang/StringBuilder;->append(J)Ljava/lang/StringBuilder;
    move-result-object v2
    invoke-virtual { v2 }, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
    move-result-object v0
    .line 278
    .local v0, where:Ljava/lang/String;
    iget-object v2, p0, Lcom/nom/lib/manager/YGLogManager;->mDatabase:Landroid/database/sqlite/SQLiteDatabase;
    const-string v3, "app_log_cached"
    const/4 v4, 0
    invoke-virtual { v2, v3, v0, v4 }, Landroid/database/sqlite/SQLiteDatabase;->delete(Ljava/lang/String;Ljava/lang/String;[Ljava/lang/String;)I
    .line 274
    monitor-exit v1
    .line 280
    return-void
    :L1
    .line 274
    .end local v0
    move-exception v2
    monitor-exit v1
    :L2
    throw v2
.end method

.method private resetStatusInCaches()V
    .catchall { :L0 .. :L2 } :L1
    .registers 7
    .prologue
    .line 263
    iget-object v2, p0, Lcom/nom/lib/manager/YGLogManager;->mLock:Ljava/lang/Object;
    monitor-enter v2
    :L0
    .line 265
    const-string v1, "status=1"
    .line 266
    .local v1, where:Ljava/lang/String;
    new-instance v0, Landroid/content/ContentValues;
    invoke-direct { v0 }, Landroid/content/ContentValues;-><init>()V
    .line 267
    .local v0, values:Landroid/content/ContentValues;
    const-string v3, "status"
    const/4 v4, 0
    invoke-static { v4 }, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;
    move-result-object v4
    invoke-virtual { v0, v3, v4 }, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/Integer;)V
    .line 268
    iget-object v3, p0, Lcom/nom/lib/manager/YGLogManager;->mDatabase:Landroid/database/sqlite/SQLiteDatabase;
    const-string v4, "app_log_cached"
    const/4 v5, 0
    invoke-virtual { v3, v4, v0, v1, v5 }, Landroid/database/sqlite/SQLiteDatabase;->update(Ljava/lang/String;Landroid/content/ContentValues;Ljava/lang/String;[Ljava/lang/String;)I
    .line 263
    monitor-exit v2
    .line 271
    return-void
    :L1
    .line 263
    .end local v0
    .end local v1
    move-exception v3
    monitor-exit v2
    :L2
    throw v3
.end method

.method private saveLog(Ljava/lang/String;Ljava/lang/String;)J
    .registers 7
    .prologue
    .line 109
    invoke-static { }, Ljava/lang/System;->currentTimeMillis()J
    move-result-wide v0
    .line 111
    .local v0, now:J
    invoke-direct { p0, p1, p2, v0, v1 }, Lcom/nom/lib/manager/YGLogManager;->saveLog(Ljava/lang/String;Ljava/lang/String;J)J
    move-result-wide v2
    return-wide v2
.end method

.method private saveLog(Ljava/lang/String;Ljava/lang/String;J)J
    .catchall { :L0 .. :L2 } :L1
    .registers 12
    .prologue
    .line 91
    const-wide/16 v0, 0
    .line 92
    .local v0, recId:J
    new-instance v2, Landroid/content/ContentValues;
    invoke-direct { v2 }, Landroid/content/ContentValues;-><init>()V
    .line 94
    .local v2, values:Landroid/content/ContentValues;
    const-string v3, "tag"
    invoke-virtual { v2, v3, p1 }, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/String;)V
    .line 95
    const-string v3, "value"
    invoke-virtual { v2, v3, p2 }, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/String;)V
    .line 96
    const-string v3, "created_time"
    invoke-static { p3, p4 }, Ljava/lang/Long;->valueOf(J)Ljava/lang/Long;
    move-result-object v4
    invoke-virtual { v2, v3, v4 }, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/Long;)V
    .line 98
    iget-object v3, p0, Lcom/nom/lib/manager/YGLogManager;->mLock:Ljava/lang/Object;
    monitor-enter v3
    :L0
    .line 100
    iget-object v4, p0, Lcom/nom/lib/manager/YGLogManager;->mDatabase:Landroid/database/sqlite/SQLiteDatabase;
    const-string v5, "app_log"
    const/4 v6, 0
    invoke-virtual { v4, v5, v6, v2 }, Landroid/database/sqlite/SQLiteDatabase;->insert(Ljava/lang/String;Ljava/lang/String;Landroid/content/ContentValues;)J
    move-result-wide v0
    .line 98
    monitor-exit v3
    .line 106
    return-wide v0
    :L1
    .line 98
    move-exception v4
    monitor-exit v3
    :L2
    throw v4
.end method

.method private submitCachedLogs()V
    .catchall { :L0 .. :L8 } :L7
    .registers 25
    .prologue
    .line 209
    move-object/from16 v0, p0
    iget-object v0, v0, Lcom/nom/lib/manager/YGLogManager;->mLock:Ljava/lang/Object;
    move-object/from16 v23, v0
    monitor-enter v23
    :L0
    .line 211
    const-string v8, "status!=1"
    .line 212
    .local v8, where:Ljava/lang/String;
    move-object/from16 v0, p0
    iget-object v0, v0, Lcom/nom/lib/manager/YGLogManager;->mDatabase:Landroid/database/sqlite/SQLiteDatabase;
    move-object v5, v0
    const-string v6, "app_log_cached"
    const/4 v7, 0
    const/4 v9, 0
    const/4 v10, 0
    const/4 v11, 0
    const-string v12, "created_time"
    invoke-virtual/range { v5 .. v12 }, Landroid/database/sqlite/SQLiteDatabase;->query(Ljava/lang/String;[Ljava/lang/String;Ljava/lang/String;[Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Landroid/database/Cursor;
    move-result-object v14
    .line 213
    .local v14, cur:Landroid/database/Cursor;
    if-eqz v14, :L6
    .line 214
    invoke-interface { v14 }, Landroid/database/Cursor;->moveToFirst()Z
    move-result v5
    if-eqz v5, :L4
    .line 216
    const-wide/16 v17, 0
    .line 217
    .local v17, recId:J
    const/4 v15, 0
    .line 219
    .local v15, logs:Ljava/lang/String;
    move-object/from16 v0, p0
    iget-object v0, v0, Lcom/nom/lib/manager/YGLogManager;->mApplication:Lcom/nom/lib/app/YGApplication;
    move-object v5, v0
    invoke-virtual { v5 }, Lcom/nom/lib/app/YGApplication;->getRequestFactory()Lcom/nom/lib/ws/request/WSRequestFactory;
    move-result-object v20
    .line 220
    .local v20, requestFactory:Lcom/nom/lib/ws/request/WSRequestFactory;
    move-object/from16 v0, p0
    iget-object v0, v0, Lcom/nom/lib/manager/YGLogManager;->mApplication:Lcom/nom/lib/app/YGApplication;
    move-object v5, v0
    invoke-virtual { v5 }, Lcom/nom/lib/app/YGApplication;->getAppId()I
    move-result v13
    .line 221
    .local v13, appId:I
    const/16 v22, 0
    .line 222
    .local v22, yid:I
    move-object/from16 v0, p0
    iget-object v0, v0, Lcom/nom/lib/manager/YGLogManager;->mApplication:Lcom/nom/lib/app/YGApplication;
    move-object v5, v0
    invoke-virtual { v5 }, Lcom/nom/lib/app/YGApplication;->getPlayer()Lcom/nom/lib/model/Player;
    move-result-object v16
    .line 223
    .local v16, me:Lcom/nom/lib/model/Player;
    if-eqz v16, :L1
    .line 224
    invoke-virtual/range { v16 .. v16 }, Lcom/nom/lib/model/Player;->getYoinkId()I
    move-result v22
    :L1
    .line 226
    const/16 v19, 0
    :L2
    .line 230
    .local v19, request:Lcom/nom/lib/ws/request/WSRequest;
    const-string v5, "_id"
    invoke-interface { v14, v5 }, Landroid/database/Cursor;->getColumnIndex(Ljava/lang/String;)I
    move-result v5
    invoke-interface { v14, v5 }, Landroid/database/Cursor;->getLong(I)J
    move-result-wide v17
    .line 231
    const-string v5, "json"
    invoke-interface { v14, v5 }, Landroid/database/Cursor;->getColumnIndex(Ljava/lang/String;)I
    move-result v5
    invoke-interface { v14, v5 }, Landroid/database/Cursor;->getString(I)Ljava/lang/String;
    move-result-object v15
    .line 234
    move-object/from16 v0, v20
    move-object/from16 v1, p0
    move v2, v13
    move/from16 v3, v22
    move-object v4, v15
    invoke-virtual { v0, v1, v2, v3, v4 }, Lcom/nom/lib/ws/request/WSRequestFactory;->createPostLogsRequest(Lcom/nom/lib/ws/request/WSRequest$IWSRequestCallback;IILjava/lang/String;)Lcom/nom/lib/ws/request/WSRequest;
    move-result-object v19
    .line 235
    if-eqz v19, :L3
    .line 237
    new-instance v5, Ljava/lang/StringBuilder;
    const-string v6, "_id="
    invoke-direct { v5, v6 }, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V
    move-object v0, v5
    move-wide/from16 v1, v17
    invoke-virtual { v0, v1, v2 }, Ljava/lang/StringBuilder;->append(J)Ljava/lang/StringBuilder;
    move-result-object v5
    invoke-virtual { v5 }, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
    move-result-object v8
    .line 238
    new-instance v21, Landroid/content/ContentValues;
    invoke-direct/range { v21 .. v21 }, Landroid/content/ContentValues;-><init>()V
    .line 239
    .local v21, values:Landroid/content/ContentValues;
    const-string v5, "status"
    const/4 v6, 1
    invoke-static { v6 }, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;
    move-result-object v6
    move-object/from16 v0, v21
    move-object v1, v5
    move-object v2, v6
    invoke-virtual { v0, v1, v2 }, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/Integer;)V
    .line 240
    move-object/from16 v0, p0
    iget-object v0, v0, Lcom/nom/lib/manager/YGLogManager;->mDatabase:Landroid/database/sqlite/SQLiteDatabase;
    move-object v5, v0
    const-string v6, "app_log_cached"
    const/4 v7, 0
    move-object v0, v5
    move-object v1, v6
    move-object/from16 v2, v21
    move-object v3, v8
    move-object v4, v7
    invoke-virtual { v0, v1, v2, v3, v4 }, Landroid/database/sqlite/SQLiteDatabase;->update(Ljava/lang/String;Landroid/content/ContentValues;Ljava/lang/String;[Ljava/lang/String;)I
    .line 243
    move-object/from16 v0, p0
    iget-object v0, v0, Lcom/nom/lib/manager/YGLogManager;->mRequestQueue:Ljava/util/HashMap;
    move-object v5, v0
    invoke-static/range { v17 .. v18 }, Ljava/lang/Long;->valueOf(J)Ljava/lang/Long;
    move-result-object v6
    move-object v0, v5
    move-object/from16 v1, v19
    move-object v2, v6
    invoke-virtual { v0, v1, v2 }, Ljava/util/HashMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
    .line 246
    invoke-virtual/range { v19 .. v19 }, Lcom/nom/lib/ws/request/WSRequest;->submit()V
    :L3
    .line 249
    .end local v21
    invoke-interface { v14 }, Landroid/database/Cursor;->moveToNext()Z
    move-result v5
    .line 228
    if-nez v5, :L2
    :L4
    .line 251
    .end local v13
    .end local v15
    .end local v16
    .end local v17
    .end local v19
    .end local v20
    .end local v22
    invoke-interface { v14 }, Landroid/database/Cursor;->close()V
    .line 209
    monitor-exit v23
    :L5
    .line 258
    return-void
    :L6
    .line 254
    monitor-exit v23
    goto :L5
    :L7
    .line 209
    .end local v8
    .end local v14
    move-exception v5
    monitor-exit v23
    :L8
    throw v5
.end method

.method private submitLogs()V
    .catchall { :L0 .. :L2 } :L11
    .catch Lorg/json/JSONException; { :L2 .. :L3 } :L9
    .catchall { :L2 .. :L3 } :L11
    .catchall { :L4 .. :L12 } :L11
    .catchall { :L13 .. :L14 } :L11
    .registers 35
    .prologue
    .line 118
    move-object/from16 v0, p0
    iget-object v0, v0, Lcom/nom/lib/manager/YGLogManager;->mLock:Ljava/lang/Object;
    move-object/from16 v33, v0
    monitor-enter v33
    :L0
    .line 120
    new-instance v5, Ljava/lang/StringBuilder;
    const-string v6, "nom."
    invoke-direct { v5, v6 }, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V
    move-object/from16 v0, p0
    iget-object v0, v0, Lcom/nom/lib/manager/YGLogManager;->mApplication:Lcom/nom/lib/app/YGApplication;
    move-object v6, v0
    invoke-virtual { v6 }, Lcom/nom/lib/app/YGApplication;->getAppTag()Ljava/lang/String;
    move-result-object v6
    invoke-virtual { v5, v6 }, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
    move-result-object v5
    const-string v6, ".platform."
    invoke-virtual { v5, v6 }, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
    move-result-object v5
    invoke-virtual { v5 }, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
    move-result-object v24
    .line 121
    .local v24, prefix:Ljava/lang/String;
    new-instance v18, Lorg/json/JSONArray;
    invoke-direct/range { v18 .. v18 }, Lorg/json/JSONArray;-><init>()V
    .line 122
    .local v18, jsonLogs:Lorg/json/JSONArray;
    const/16 v17, 0
    .line 123
    .local v17, jsonLog:Lorg/json/JSONObject;
    const-wide/16 v25, 0
    .line 124
    .local v25, recId:J
    const/16 v19, 0
    .line 125
    .local v19, logTag:Ljava/lang/String;
    const/16 v21, 0
    .line 126
    .local v21, logVal:Ljava/lang/String;
    const/16 v20, 0
    .line 127
    .local v20, logTime:I
    const/16 v31, 0
    .line 129
    .local v31, whereToDelete:Ljava/lang/StringBuilder;
    new-instance v29, Ljava/util/HashMap;
    invoke-direct/range { v29 .. v29 }, Ljava/util/HashMap;-><init>()V
    .line 133
    .local v29, startEvents:Ljava/util/HashMap;, "Ljava/util/HashMap<Ljava/lang/String;Ljava/lang/String;>;"
    move-object/from16 v0, p0
    iget-object v0, v0, Lcom/nom/lib/manager/YGLogManager;->mDatabase:Landroid/database/sqlite/SQLiteDatabase;
    move-object v5, v0
    const-string v6, "app_log"
    const/4 v7, 0
    const/4 v8, 0
    const/4 v9, 0
    const/4 v10, 0
    const/4 v11, 0
    const-string v12, "created_time"
    invoke-virtual/range { v5 .. v12 }, Landroid/database/sqlite/SQLiteDatabase;->query(Ljava/lang/String;[Ljava/lang/String;Ljava/lang/String;[Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Landroid/database/Cursor;
    move-result-object v14
    .line 134
    .local v14, cur:Landroid/database/Cursor;
    if-eqz v14, :L13
    .line 135
    invoke-interface { v14 }, Landroid/database/Cursor;->moveToFirst()Z
    move-result v5
    if-eqz v5, :L6
    :L1
    .line 138
    const-string v5, "_id"
    invoke-interface { v14, v5 }, Landroid/database/Cursor;->getColumnIndex(Ljava/lang/String;)I
    move-result v5
    invoke-interface { v14, v5 }, Landroid/database/Cursor;->getLong(I)J
    move-result-wide v25
    .line 139
    const-string v5, "tag"
    invoke-interface { v14, v5 }, Landroid/database/Cursor;->getColumnIndex(Ljava/lang/String;)I
    move-result v5
    invoke-interface { v14, v5 }, Landroid/database/Cursor;->getString(I)Ljava/lang/String;
    move-result-object v19
    .line 140
    const-string v5, "value"
    invoke-interface { v14, v5 }, Landroid/database/Cursor;->getColumnIndex(Ljava/lang/String;)I
    move-result v5
    invoke-interface { v14, v5 }, Landroid/database/Cursor;->getString(I)Ljava/lang/String;
    move-result-object v21
    .line 141
    const-string v5, "created_time"
    invoke-interface { v14, v5 }, Landroid/database/Cursor;->getColumnIndex(Ljava/lang/String;)I
    move-result v5
    invoke-interface { v14, v5 }, Landroid/database/Cursor;->getLong(I)J
    move-result-wide v5
    const-wide/16 v7, 1000
    div-long/2addr v5, v7
    move-wide v0, v5
    long-to-int v0, v0
    move/from16 v20, v0
    .line 144
    new-instance v17, Lorg/json/JSONObject;
    .end local v17
    invoke-direct/range { v17 .. v17 }, Lorg/json/JSONObject;-><init>()V
    :L2
    .line 146
    .restart local v17
    const-string v5, "tag"
    new-instance v6, Ljava/lang/StringBuilder;
    invoke-static/range { v24 .. v24 }, Ljava/lang/String;->valueOf(Ljava/lang/Object;)Ljava/lang/String;
    move-result-object v7
    invoke-direct { v6, v7 }, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V
    move-object v0, v6
    move-object/from16 v1, v19
    invoke-virtual { v0, v1 }, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
    move-result-object v6
    invoke-virtual { v6 }, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
    move-result-object v6
    move-object/from16 v0, v17
    move-object v1, v5
    move-object v2, v6
    invoke-virtual { v0, v1, v2 }, Lorg/json/JSONObject;->put(Ljava/lang/String;Ljava/lang/Object;)Lorg/json/JSONObject;
    .line 147
    const-string v5, "value"
    move-object/from16 v0, v17
    move-object v1, v5
    move-object/from16 v2, v21
    invoke-virtual { v0, v1, v2 }, Lorg/json/JSONObject;->put(Ljava/lang/String;Ljava/lang/Object;)Lorg/json/JSONObject;
    .line 148
    const-string v5, "created_time"
    move-object/from16 v0, v17
    move-object v1, v5
    move/from16 v2, v20
    invoke-virtual { v0, v1, v2 }, Lorg/json/JSONObject;->put(Ljava/lang/String;I)Lorg/json/JSONObject;
    .line 151
    move-object/from16 v0, v18
    move-object/from16 v1, v17
    invoke-virtual { v0, v1 }, Lorg/json/JSONArray;->put(Ljava/lang/Object;)Lorg/json/JSONArray;
    :L3
    .line 157
    if-nez v31, :L10
    :L4
    .line 158
    new-instance v31, Ljava/lang/StringBuilder;
    .end local v31
    new-instance v5, Ljava/lang/StringBuilder;
    const-string v6, "_id="
    invoke-direct { v5, v6 }, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V
    move-object v0, v5
    move-wide/from16 v1, v25
    invoke-virtual { v0, v1, v2 }, Ljava/lang/StringBuilder;->append(J)Ljava/lang/StringBuilder;
    move-result-object v5
    invoke-virtual { v5 }, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
    move-result-object v5
    move-object/from16 v0, v31
    move-object v1, v5
    invoke-direct { v0, v1 }, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V
    :L5
    .line 165
    .restart local v31
    invoke-interface { v14 }, Landroid/database/Cursor;->moveToNext()Z
    move-result v5
    .line 136
    if-nez v5, :L1
    :L6
    .line 167
    invoke-interface { v14 }, Landroid/database/Cursor;->close()V
    .line 173
    move-object/from16 v0, p0
    iget-object v0, v0, Lcom/nom/lib/manager/YGLogManager;->mApplication:Lcom/nom/lib/app/YGApplication;
    move-object v5, v0
    invoke-virtual { v5 }, Lcom/nom/lib/app/YGApplication;->getRequestFactory()Lcom/nom/lib/ws/request/WSRequestFactory;
    move-result-object v28
    .line 174
    .local v28, requestFactory:Lcom/nom/lib/ws/request/WSRequestFactory;
    move-object/from16 v0, p0
    iget-object v0, v0, Lcom/nom/lib/manager/YGLogManager;->mApplication:Lcom/nom/lib/app/YGApplication;
    move-object v5, v0
    invoke-virtual { v5 }, Lcom/nom/lib/app/YGApplication;->getAppId()I
    move-result v13
    .line 175
    .local v13, appId:I
    move-object/from16 v0, p0
    iget-object v0, v0, Lcom/nom/lib/manager/YGLogManager;->mApplication:Lcom/nom/lib/app/YGApplication;
    move-object v5, v0
    invoke-virtual { v5 }, Lcom/nom/lib/app/YGApplication;->getPlayer()Lcom/nom/lib/model/Player;
    move-result-object v5
    invoke-virtual { v5 }, Lcom/nom/lib/model/Player;->getYoinkId()I
    move-result v32
    .line 176
    .local v32, yid:I
    const/16 v27, 0
    .line 178
    .local v27, request:Lcom/nom/lib/ws/request/WSRequest;
    invoke-virtual/range { v18 .. v18 }, Lorg/json/JSONArray;->length()I
    move-result v5
    if-lez v5, :L7
    .line 180
    invoke-virtual/range { v18 .. v18 }, Lorg/json/JSONArray;->toString()Ljava/lang/String;
    move-result-object v5
    move-object/from16 v0, v28
    move-object/from16 v1, p0
    move v2, v13
    move/from16 v3, v32
    move-object v4, v5
    invoke-virtual { v0, v1, v2, v3, v4 }, Lcom/nom/lib/ws/request/WSRequestFactory;->createPostLogsRequest(Lcom/nom/lib/ws/request/WSRequest$IWSRequestCallback;IILjava/lang/String;)Lcom/nom/lib/ws/request/WSRequest;
    move-result-object v27
    .line 181
    if-eqz v27, :L7
    .line 183
    new-instance v30, Landroid/content/ContentValues;
    invoke-direct/range { v30 .. v30 }, Landroid/content/ContentValues;-><init>()V
    .line 184
    .local v30, values:Landroid/content/ContentValues;
    invoke-static { }, Ljava/lang/System;->currentTimeMillis()J
    move-result-wide v22
    .line 185
    .local v22, now:J
    const-string v5, "json"
    invoke-virtual/range { v18 .. v18 }, Lorg/json/JSONArray;->toString()Ljava/lang/String;
    move-result-object v6
    move-object/from16 v0, v30
    move-object v1, v5
    move-object v2, v6
    invoke-virtual { v0, v1, v2 }, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/String;)V
    .line 186
    const-string v5, "status"
    const/4 v6, 1
    invoke-static { v6 }, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;
    move-result-object v6
    move-object/from16 v0, v30
    move-object v1, v5
    move-object v2, v6
    invoke-virtual { v0, v1, v2 }, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/Integer;)V
    .line 187
    const-string v5, "created_time"
    invoke-static/range { v22 .. v23 }, Ljava/lang/Long;->valueOf(J)Ljava/lang/Long;
    move-result-object v6
    move-object/from16 v0, v30
    move-object v1, v5
    move-object v2, v6
    invoke-virtual { v0, v1, v2 }, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/Long;)V
    .line 188
    move-object/from16 v0, p0
    iget-object v0, v0, Lcom/nom/lib/manager/YGLogManager;->mDatabase:Landroid/database/sqlite/SQLiteDatabase;
    move-object v5, v0
    const-string v6, "app_log_cached"
    const/4 v7, 0
    move-object v0, v5
    move-object v1, v6
    move-object v2, v7
    move-object/from16 v3, v30
    invoke-virtual { v0, v1, v2, v3 }, Landroid/database/sqlite/SQLiteDatabase;->insert(Ljava/lang/String;Ljava/lang/String;Landroid/content/ContentValues;)J
    move-result-wide v25
    .line 192
    move-object/from16 v0, p0
    iget-object v0, v0, Lcom/nom/lib/manager/YGLogManager;->mDatabase:Landroid/database/sqlite/SQLiteDatabase;
    move-object v5, v0
    const-string v6, "app_log"
    invoke-virtual/range { v31 .. v31 }, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
    move-result-object v7
    const/4 v8, 0
    invoke-virtual { v5, v6, v7, v8 }, Landroid/database/sqlite/SQLiteDatabase;->delete(Ljava/lang/String;Ljava/lang/String;[Ljava/lang/String;)I
    move-result v15
    .line 195
    .local v15, deleted:I
    move-object/from16 v0, p0
    iget-object v0, v0, Lcom/nom/lib/manager/YGLogManager;->mRequestQueue:Ljava/util/HashMap;
    move-object v5, v0
    invoke-static/range { v25 .. v26 }, Ljava/lang/Long;->valueOf(J)Ljava/lang/Long;
    move-result-object v6
    move-object v0, v5
    move-object/from16 v1, v27
    move-object v2, v6
    invoke-virtual { v0, v1, v2 }, Ljava/util/HashMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
    .line 198
    invoke-virtual/range { v27 .. v27 }, Lcom/nom/lib/ws/request/WSRequest;->submit()V
    :L7
    .line 118
    .end local v15
    .end local v22
    .end local v30
    monitor-exit v33
    :L8
    .line 204
    .end local v13
    .end local v27
    .end local v28
    .end local v32
    return-void
    :L9
    .line 152
    move-exception v5
    move-object/from16 v16, v5
    .line 154
    .local v16, e:Lorg/json/JSONException;
    goto/16 :L5
    :L10
    .line 161
    .end local v16
    new-instance v5, Ljava/lang/StringBuilder;
    const-string v6, " OR _id="
    invoke-direct { v5, v6 }, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V
    move-object v0, v5
    move-wide/from16 v1, v25
    invoke-virtual { v0, v1, v2 }, Ljava/lang/StringBuilder;->append(J)Ljava/lang/StringBuilder;
    move-result-object v5
    invoke-virtual { v5 }, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
    move-result-object v5
    move-object/from16 v0, v31
    move-object v1, v5
    invoke-virtual { v0, v1 }, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
    goto/16 :L5
    :L11
    .line 118
    .end local v14
    .end local v17
    .end local v18
    .end local v19
    .end local v20
    .end local v21
    .end local v24
    .end local v25
    .end local v29
    .end local v31
    move-exception v5
    monitor-exit v33
    :L12
    throw v5
    :L13
    .line 170
    .restart local v14
    .restart local v17
    .restart local v18
    .restart local v19
    .restart local v20
    .restart local v21
    .restart local v24
    .restart local v25
    .restart local v29
    .restart local v31
    monitor-exit v33
    :L14
    goto :L8
.end method

.method public addLog(Ljava/lang/String;Ljava/lang/String;J)V
    .registers 11
    .prologue
    .line 76
    new-instance v0, Lcom/nom/lib/manager/YGLogManager$AddLogTask;
    move-object v1, p0
    move-object v2, p1
    move-object v3, p2
    move-wide v4, p3
    invoke-direct/range { v0 .. v5 }, Lcom/nom/lib/manager/YGLogManager$AddLogTask;-><init>(Lcom/nom/lib/manager/YGLogManager;Ljava/lang/String;Ljava/lang/String;J)V
    .line 77
    .local v0, task:Lcom/nom/lib/manager/YGLogManager$AddLogTask;
    invoke-virtual { v0 }, Lcom/nom/lib/manager/YGLogManager$AddLogTask;->start()V
    .line 78
    return-void
.end method

.method public cleanup()V
    .registers 4
    .prologue
    .line 62
    iget-object v2, p0, Lcom/nom/lib/manager/YGLogManager;->mRequestQueue:Ljava/util/HashMap;
    if-eqz v2, :L1
    .line 63
    iget-object v2, p0, Lcom/nom/lib/manager/YGLogManager;->mRequestQueue:Ljava/util/HashMap;
    invoke-virtual { v2 }, Ljava/util/HashMap;->keySet()Ljava/util/Set;
    move-result-object v2
    invoke-interface { v2 }, Ljava/util/Set;->iterator()Ljava/util/Iterator;
    move-result-object v1
    .line 64
    .local v1, requests:Ljava/util/Iterator;, "Ljava/util/Iterator<Lcom/nom/lib/ws/request/WSRequest;>;"
    const/4 v0, 0
    :L0
    .line 65
    .local v0, request:Lcom/nom/lib/ws/request/WSRequest;
    invoke-interface { v1 }, Ljava/util/Iterator;->hasNext()Z
    move-result v2
    if-nez v2, :L2
    :L1
    .line 72
    .end local v0
    .end local v1
    return-void
    :L2
    .line 66
    .restart local v0
    .restart local v1
    invoke-interface { v1 }, Ljava/util/Iterator;->next()Ljava/lang/Object;
    move-result-object v0
    .end local v0
    check-cast v0, Lcom/nom/lib/ws/request/WSRequest;
    .line 67
    .restart local v0
    if-eqz v0, :L0
    .line 68
    invoke-virtual { v0 }, Lcom/nom/lib/ws/request/WSRequest;->cancel()V
    goto :L0
.end method

.method public postLogs()V
    .registers 3
    .prologue
    .line 82
    new-instance v0, Lcom/nom/lib/manager/YGLogManager$PostLogsTask;
    invoke-direct { v0, p0 }, Lcom/nom/lib/manager/YGLogManager$PostLogsTask;-><init>(Lcom/nom/lib/manager/YGLogManager;)V
    .line 83
    .local v0, task:Lcom/nom/lib/manager/YGLogManager$PostLogsTask;
    invoke-virtual { v0 }, Lcom/nom/lib/manager/YGLogManager$PostLogsTask;->start()V
    .line 86
    new-instance v1, Lcom/nom/lib/manager/YGLogManager$PostCachedLogsTask;
    invoke-direct { v1, p0 }, Lcom/nom/lib/manager/YGLogManager$PostCachedLogsTask;-><init>(Lcom/nom/lib/manager/YGLogManager;)V
    .line 87
    .local v1, task2:Lcom/nom/lib/manager/YGLogManager$PostCachedLogsTask;
    invoke-virtual { v1 }, Lcom/nom/lib/manager/YGLogManager$PostCachedLogsTask;->start()V
    .line 88
    return-void
.end method

.method public receivedError(Lcom/nom/lib/ws/request/WSRequest;)V
    .registers 7
    .prologue
    .line 313
    iget-object v3, p0, Lcom/nom/lib/manager/YGLogManager;->mRequestQueue:Ljava/util/HashMap;
    invoke-virtual { v3, p1 }, Ljava/util/HashMap;->get(Ljava/lang/Object;)Ljava/lang/Object;
    move-result-object v2
    .line 314
    .local v2, objId:Ljava/lang/Object;
    if-eqz v2, :L0
    .line 316
    iget-object v3, p0, Lcom/nom/lib/manager/YGLogManager;->mRequestQueue:Ljava/util/HashMap;
    invoke-virtual { v3, p1 }, Ljava/util/HashMap;->get(Ljava/lang/Object;)Ljava/lang/Object;
    move-result-object v3
    check-cast v3, Ljava/lang/Long;
    invoke-virtual { v3 }, Ljava/lang/Long;->longValue()J
    move-result-wide v0
    .line 317
    .local v0, logId:J
    const-wide/16 v3, 0
    cmp-long v3, v0, v3
    if-lez v3, :L0
    .line 319
    invoke-direct { p0, v0, v1 }, Lcom/nom/lib/manager/YGLogManager;->onErrorSubmitLogs(J)V
    .line 322
    iget-object v3, p0, Lcom/nom/lib/manager/YGLogManager;->mRequestQueue:Ljava/util/HashMap;
    invoke-virtual { v3, p1 }, Ljava/util/HashMap;->remove(Ljava/lang/Object;)Ljava/lang/Object;
    :L0
    .line 325
    .end local v0
    return-void
.end method

.method public receivedResponse(Lcom/nom/lib/ws/request/WSRequest;)V
    .registers 7
    .prologue
    .line 298
    iget-object v3, p0, Lcom/nom/lib/manager/YGLogManager;->mRequestQueue:Ljava/util/HashMap;
    invoke-virtual { v3, p1 }, Ljava/util/HashMap;->get(Ljava/lang/Object;)Ljava/lang/Object;
    move-result-object v2
    .line 299
    .local v2, objId:Ljava/lang/Object;
    if-eqz v2, :L0
    .line 301
    check-cast v2, Ljava/lang/Long;
    .end local v2
    invoke-virtual { v2 }, Ljava/lang/Long;->longValue()J
    move-result-wide v0
    .line 302
    .local v0, logId:J
    const-wide/16 v3, 0
    cmp-long v3, v0, v3
    if-lez v3, :L0
    .line 304
    invoke-direct { p0, v0, v1 }, Lcom/nom/lib/manager/YGLogManager;->onSuccessSubmitLogs(J)V
    .line 307
    iget-object v3, p0, Lcom/nom/lib/manager/YGLogManager;->mRequestQueue:Ljava/util/HashMap;
    invoke-virtual { v3, p1 }, Ljava/util/HashMap;->remove(Ljava/lang/Object;)Ljava/lang/Object;
    :L0
    .line 310
    .end local v0
    return-void
.end method
