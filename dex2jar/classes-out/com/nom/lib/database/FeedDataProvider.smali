.class public Lcom/nom/lib/database/FeedDataProvider;
.super Landroid/content/ContentProvider;
.source "FeedDataProvider.java"

.field private final static INCOMING_FEED_COLLECTION_URI_INDICATOR:I = 1

.field private final static INCOMING_SINGLE_FEED_URI_INDICATOR:I = 2

.field private final static sUriMatcher:Landroid/content/UriMatcher;

.method static constructor <clinit>()V
    .registers 4
    .prologue
    .line 25
    new-instance v0, Landroid/content/UriMatcher;
    const/4 v1, -1
    invoke-direct { v0, v1 }, Landroid/content/UriMatcher;-><init>(I)V
    sput-object v0, Lcom/nom/lib/database/FeedDataProvider;->sUriMatcher:Landroid/content/UriMatcher;
    .line 26
    sget-object v0, Lcom/nom/lib/database/FeedDataProvider;->sUriMatcher:Landroid/content/UriMatcher;
    const-string v1, "com.nom.provider.FeedDataProvider"
    const-string v2, "feeds"
    const/4 v3, 1
    invoke-virtual { v0, v1, v2, v3 }, Landroid/content/UriMatcher;->addURI(Ljava/lang/String;Ljava/lang/String;I)V
    .line 27
    sget-object v0, Lcom/nom/lib/database/FeedDataProvider;->sUriMatcher:Landroid/content/UriMatcher;
    const-string v1, "com.nom.provider.FeedDataProvider"
    const-string v2, "feeds/#"
    const/4 v3, 2
    invoke-virtual { v0, v1, v2, v3 }, Landroid/content/UriMatcher;->addURI(Ljava/lang/String;Ljava/lang/String;I)V
    .line 18
    return-void
.end method

.method public constructor <init>()V
    .registers 1
    .prologue
    .line 18
    invoke-direct { p0 }, Landroid/content/ContentProvider;-><init>()V
    return-void
.end method

.method public delete(Landroid/net/Uri;Ljava/lang/String;[Ljava/lang/String;)I
    .registers 11
    .prologue
    .line 54
    invoke-virtual { p0 }, Lcom/nom/lib/database/FeedDataProvider;->getContext()Landroid/content/Context;
    move-result-object v3
    check-cast v3, Lcom/nom/lib/app/YGApplication;
    invoke-virtual { v3 }, Lcom/nom/lib/app/YGApplication;->getWritableDatabase()Landroid/database/sqlite/SQLiteDatabase;
    move-result-object v1
    .line 57
    .local v1, db:Landroid/database/sqlite/SQLiteDatabase;
    sget-object v3, Lcom/nom/lib/database/FeedDataProvider;->sUriMatcher:Landroid/content/UriMatcher;
    invoke-virtual { v3, p1 }, Landroid/content/UriMatcher;->match(Landroid/net/Uri;)I
    move-result v3
    packed-switch v3, :L5
    .line 74
    new-instance v3, Ljava/lang/IllegalArgumentException;
    new-instance v4, Ljava/lang/StringBuilder;
    const-string v5, "Unknown URI "
    invoke-direct { v4, v5 }, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V
    invoke-virtual { v4, p1 }, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;
    move-result-object v4
    invoke-virtual { v4 }, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
    move-result-object v4
    invoke-direct { v3, v4 }, Ljava/lang/IllegalArgumentException;-><init>(Ljava/lang/String;)V
    throw v3
    :L0
    .line 60
    const-string v3, "feeds"
    invoke-virtual { v1, v3, p2, p3 }, Landroid/database/sqlite/SQLiteDatabase;->delete(Ljava/lang/String;Ljava/lang/String;[Ljava/lang/String;)I
    move-result v0
    :L1
    .line 80
    .local v0, count:I
    invoke-virtual { p0 }, Lcom/nom/lib/database/FeedDataProvider;->getContext()Landroid/content/Context;
    move-result-object v3
    invoke-virtual { v3 }, Landroid/content/Context;->getContentResolver()Landroid/content/ContentResolver;
    move-result-object v3
    const/4 v4, 0
    invoke-virtual { v3, p1, v4 }, Landroid/content/ContentResolver;->notifyChange(Landroid/net/Uri;Landroid/database/ContentObserver;)V
    .line 82
    return v0
    :L2
    .line 64
    .end local v0
    invoke-virtual { p1 }, Landroid/net/Uri;->getPathSegments()Ljava/util/List;
    move-result-object v3
    const/4 v4, 1
    invoke-interface { v3, v4 }, Ljava/util/List;->get(I)Ljava/lang/Object;
    move-result-object v2
    check-cast v2, Ljava/lang/String;
    .line 65
    .local v2, rowId:Ljava/lang/String;
    const-string v3, "feeds"
    .line 66
    new-instance v4, Ljava/lang/StringBuilder;
    const-string v5, "_id="
    invoke-direct { v4, v5 }, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V
    invoke-virtual { v4, v2 }, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
    move-result-object v4
    .line 67
    invoke-static { p2 }, Landroid/text/TextUtils;->isEmpty(Ljava/lang/CharSequence;)Z
    move-result v5
    if-nez v5, :L4
    new-instance v5, Ljava/lang/StringBuilder;
    const-string v6, " AND ("
    invoke-direct { v5, v6 }, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V
    invoke-virtual { v5, p2 }, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
    move-result-object v5
    const/16 v6, 41
    invoke-virtual { v5, v6 }, Ljava/lang/StringBuilder;->append(C)Ljava/lang/StringBuilder;
    move-result-object v5
    invoke-virtual { v5 }, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
    move-result-object v5
    :L3
    invoke-virtual { v4, v5 }, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
    move-result-object v4
    .line 66
    invoke-virtual { v4 }, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
    move-result-object v4
    .line 65
    invoke-virtual { v1, v3, v4, p3 }, Landroid/database/sqlite/SQLiteDatabase;->delete(Ljava/lang/String;Ljava/lang/String;[Ljava/lang/String;)I
    move-result v0
    .line 69
    .restart local v0
    goto :L1
    :L4
    .line 67
    .end local v0
    const-string v5, ""
    goto :L3
    .line 57
    :L5
    .packed-switch 1
        :L0
        :L2
    .end packed-switch
.end method

.method public getType(Landroid/net/Uri;)Ljava/lang/String;
    .registers 5
    .prologue
    .line 38
    sget-object v0, Lcom/nom/lib/database/FeedDataProvider;->sUriMatcher:Landroid/content/UriMatcher;
    invoke-virtual { v0, p1 }, Landroid/content/UriMatcher;->match(Landroid/net/Uri;)I
    move-result v0
    packed-switch v0, :L3
    .line 46
    new-instance v0, Ljava/lang/IllegalArgumentException;
    new-instance v1, Ljava/lang/StringBuilder;
    const-string v2, "Unknown URI "
    invoke-direct { v1, v2 }, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V
    invoke-virtual { v1, p1 }, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;
    move-result-object v1
    invoke-virtual { v1 }, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
    move-result-object v1
    invoke-direct { v0, v1 }, Ljava/lang/IllegalArgumentException;-><init>(Ljava/lang/String;)V
    throw v0
    :L0
    .line 40
    const-string v0, "vnd.yoinkgames.cursor.dir/vnd.yoinkgames.yg-feed"
    :L1
    .line 43
    return-object v0
    :L2
    const-string v0, "vnd.yoinkgames.cursor.item/vnd.yoinkgames.yg-feed"
    goto :L1
    .line 38
    :L3
    .packed-switch 1
        :L0
        :L2
    .end packed-switch
.end method

.method public insert(Landroid/net/Uri;Landroid/content/ContentValues;)Landroid/net/Uri;
    .registers 12
    .prologue
    const/4 v8, 0
    .line 89
    sget-object v6, Lcom/nom/lib/database/FeedDataProvider;->sUriMatcher:Landroid/content/UriMatcher;
    invoke-virtual { v6, p1 }, Landroid/content/UriMatcher;->match(Landroid/net/Uri;)I
    move-result v6
    const/4 v7, 1
    if-eq v6, v7, :L0
    .line 90
    new-instance v6, Ljava/lang/IllegalArgumentException;
    new-instance v7, Ljava/lang/StringBuilder;
    const-string v8, "Unknown URI "
    invoke-direct { v7, v8 }, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V
    invoke-virtual { v7, p1 }, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;
    move-result-object v7
    invoke-virtual { v7 }, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
    move-result-object v7
    invoke-direct { v6, v7 }, Ljava/lang/IllegalArgumentException;-><init>(Ljava/lang/String;)V
    throw v6
    :L0
    .line 94
    const-string v6, "created_time"
    invoke-virtual { p2, v6 }, Landroid/content/ContentValues;->containsKey(Ljava/lang/String;)Z
    move-result v6
    if-nez v6, :L2
    .line 95
    invoke-static { }, Ljava/lang/System;->currentTimeMillis()J
    move-result-wide v2
    .line 96
    .local v2, now:J
    const-string v6, "created_time"
    invoke-static { v2, v3 }, Ljava/lang/Long;->valueOf(J)Ljava/lang/Long;
    move-result-object v7
    invoke-virtual { p2, v6, v7 }, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/Long;)V
    .line 97
    const-string v6, "modifieded_time"
    invoke-static { v2, v3 }, Ljava/lang/Long;->valueOf(J)Ljava/lang/Long;
    move-result-object v7
    invoke-virtual { p2, v6, v7 }, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/Long;)V
    :L1
    .line 104
    .end local v2
    invoke-virtual { p0 }, Lcom/nom/lib/database/FeedDataProvider;->getContext()Landroid/content/Context;
    move-result-object v6
    check-cast v6, Lcom/nom/lib/app/YGApplication;
    invoke-virtual { v6 }, Lcom/nom/lib/app/YGApplication;->getWritableDatabase()Landroid/database/sqlite/SQLiteDatabase;
    move-result-object v0
    .line 107
    .local v0, db:Landroid/database/sqlite/SQLiteDatabase;
    const-string v6, "feeds"
    invoke-virtual { v0, v6, v8, p2 }, Landroid/database/sqlite/SQLiteDatabase;->insert(Ljava/lang/String;Ljava/lang/String;Landroid/content/ContentValues;)J
    move-result-wide v4
    .line 111
    .local v4, rowId:J
    const-wide/16 v6, 0
    cmp-long v6, v4, v6
    if-lez v6, :L3
    .line 113
    sget-object v6, Lcom/nom/lib/database/FeedMetaData$FeedTableMetaData;->CONTENT_URI:Landroid/net/Uri;
    invoke-static { v6, v4, v5 }, Landroid/content/ContentUris;->withAppendedId(Landroid/net/Uri;J)Landroid/net/Uri;
    move-result-object v1
    .line 115
    .local v1, insertedLocationUri:Landroid/net/Uri;
    invoke-virtual { p0 }, Lcom/nom/lib/database/FeedDataProvider;->getContext()Landroid/content/Context;
    move-result-object v6
    invoke-virtual { v6 }, Landroid/content/Context;->getContentResolver()Landroid/content/ContentResolver;
    move-result-object v6
    invoke-virtual { v6, v1, v8 }, Landroid/content/ContentResolver;->notifyChange(Landroid/net/Uri;Landroid/database/ContentObserver;)V
    .line 117
    return-object v1
    :L2
    .line 100
    .end local v0
    .end local v1
    .end local v4
    const-string v6, "modifieded_time"
    const-string v7, "created_time"
    invoke-virtual { p2, v7 }, Landroid/content/ContentValues;->getAsLong(Ljava/lang/String;)Ljava/lang/Long;
    move-result-object v7
    invoke-virtual { p2, v6, v7 }, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/Long;)V
    goto :L1
    :L3
    .line 121
    .restart local v0
    .restart local v4
    new-instance v6, Landroid/database/SQLException;
    new-instance v7, Ljava/lang/StringBuilder;
    const-string v8, "Failed to insert row into "
    invoke-direct { v7, v8 }, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V
    invoke-virtual { v7, p1 }, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;
    move-result-object v7
    invoke-virtual { v7 }, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
    move-result-object v7
    invoke-direct { v6, v7 }, Landroid/database/SQLException;-><init>(Ljava/lang/String;)V
    throw v6
.end method

.method public onCreate()Z
    .registers 2
    .prologue
    .line 33
    const/4 v0, 1
    return v0
.end method

.method public query(Landroid/net/Uri;[Ljava/lang/String;Ljava/lang/String;[Ljava/lang/String;Ljava/lang/String;)Landroid/database/Cursor;
    .registers 15
    .prologue
    const/4 v5, 0
    .line 128
    new-instance v0, Landroid/database/sqlite/SQLiteQueryBuilder;
    invoke-direct { v0 }, Landroid/database/sqlite/SQLiteQueryBuilder;-><init>()V
    .line 129
    .local v0, qb:Landroid/database/sqlite/SQLiteQueryBuilder;
    sget-object v2, Lcom/nom/lib/database/FeedDataProvider;->sUriMatcher:Landroid/content/UriMatcher;
    invoke-virtual { v2, p1 }, Landroid/content/UriMatcher;->match(Landroid/net/Uri;)I
    move-result v2
    packed-switch v2, :L5
    .line 143
    new-instance v2, Ljava/lang/IllegalArgumentException;
    new-instance v3, Ljava/lang/StringBuilder;
    const-string v4, "Unknown URI "
    invoke-direct { v3, v4 }, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V
    invoke-virtual { v3, p1 }, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;
    move-result-object v3
    invoke-virtual { v3 }, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
    move-result-object v3
    invoke-direct { v2, v3 }, Ljava/lang/IllegalArgumentException;-><init>(Ljava/lang/String;)V
    throw v2
    :L0
    .line 132
    const-string v2, "feeds"
    invoke-virtual { v0, v2 }, Landroid/database/sqlite/SQLiteQueryBuilder;->setTables(Ljava/lang/String;)V
    .line 133
    invoke-virtual { v0, v5 }, Landroid/database/sqlite/SQLiteQueryBuilder;->setProjectionMap(Ljava/util/Map;)V
    :L1
    .line 148
    invoke-static { p5 }, Landroid/text/TextUtils;->isEmpty(Ljava/lang/CharSequence;)Z
    move-result v2
    if-eqz v2, :L4
    .line 149
    const-string v7, "server_time DESC"
    :L2
    .line 155
    .local v7, orderBy:Ljava/lang/String;
    invoke-virtual { p0 }, Lcom/nom/lib/database/FeedDataProvider;->getContext()Landroid/content/Context;
    move-result-object v2
    check-cast v2, Lcom/nom/lib/app/YGApplication;
    invoke-virtual { v2 }, Lcom/nom/lib/app/YGApplication;->getReadableDatabase()Landroid/database/sqlite/SQLiteDatabase;
    move-result-object v1
    .local v1, db:Landroid/database/sqlite/SQLiteDatabase;
    move-object v2, p2
    move-object v3, p3
    move-object v4, p4
    move-object v6, v5
    .line 157
    invoke-virtual/range { v0 .. v7 }, Landroid/database/sqlite/SQLiteQueryBuilder;->query(Landroid/database/sqlite/SQLiteDatabase;[Ljava/lang/String;Ljava/lang/String;[Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Landroid/database/Cursor;
    move-result-object v8
    .line 161
    .local v8, cur:Landroid/database/Cursor;
    invoke-interface { v8 }, Landroid/database/Cursor;->moveToFirst()Z
    .line 165
    invoke-virtual { p0 }, Lcom/nom/lib/database/FeedDataProvider;->getContext()Landroid/content/Context;
    move-result-object v2
    invoke-virtual { v2 }, Landroid/content/Context;->getContentResolver()Landroid/content/ContentResolver;
    move-result-object v2
    invoke-interface { v8, v2, p1 }, Landroid/database/Cursor;->setNotificationUri(Landroid/content/ContentResolver;Landroid/net/Uri;)V
    .line 169
    return-object v8
    :L3
    .line 137
    .end local v1
    .end local v7
    .end local v8
    const-string v2, "feeds"
    invoke-virtual { v0, v2 }, Landroid/database/sqlite/SQLiteQueryBuilder;->setTables(Ljava/lang/String;)V
    .line 138
    invoke-virtual { v0, v5 }, Landroid/database/sqlite/SQLiteQueryBuilder;->setProjectionMap(Ljava/util/Map;)V
    .line 139
    new-instance v3, Ljava/lang/StringBuilder;
    const-string v2, "_id="
    invoke-direct { v3, v2 }, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V
    invoke-virtual { p1 }, Landroid/net/Uri;->getPathSegments()Ljava/util/List;
    move-result-object v2
    const/4 v4, 1
    invoke-interface { v2, v4 }, Ljava/util/List;->get(I)Ljava/lang/Object;
    move-result-object v2
    check-cast v2, Ljava/lang/String;
    invoke-virtual { v3, v2 }, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
    move-result-object v2
    invoke-virtual { v2 }, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
    move-result-object v2
    invoke-virtual { v0, v2 }, Landroid/database/sqlite/SQLiteQueryBuilder;->appendWhere(Ljava/lang/CharSequence;)V
    goto :L1
    :L4
    .line 151
    move-object v7, p5
    .restart local v7
    goto :L2
    .line 129
    :L5
    .packed-switch 1
        :L0
        :L3
    .end packed-switch
.end method

.method public update(Landroid/net/Uri;Landroid/content/ContentValues;Ljava/lang/String;[Ljava/lang/String;)I
    .registers 12
    .prologue
    .line 175
    invoke-virtual { p0 }, Lcom/nom/lib/database/FeedDataProvider;->getContext()Landroid/content/Context;
    move-result-object v3
    check-cast v3, Lcom/nom/lib/app/YGApplication;
    invoke-virtual { v3 }, Lcom/nom/lib/app/YGApplication;->getWritableDatabase()Landroid/database/sqlite/SQLiteDatabase;
    move-result-object v1
    .line 178
    .local v1, db:Landroid/database/sqlite/SQLiteDatabase;
    sget-object v3, Lcom/nom/lib/database/FeedDataProvider;->sUriMatcher:Landroid/content/UriMatcher;
    invoke-virtual { v3, p1 }, Landroid/content/UriMatcher;->match(Landroid/net/Uri;)I
    move-result v3
    packed-switch v3, :L5
    .line 195
    new-instance v3, Ljava/lang/IllegalArgumentException;
    new-instance v4, Ljava/lang/StringBuilder;
    const-string v5, "Unknown URI "
    invoke-direct { v4, v5 }, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V
    invoke-virtual { v4, p1 }, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;
    move-result-object v4
    invoke-virtual { v4 }, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
    move-result-object v4
    invoke-direct { v3, v4 }, Ljava/lang/IllegalArgumentException;-><init>(Ljava/lang/String;)V
    throw v3
    :L0
    .line 180
    const-string v3, "feeds"
    invoke-virtual { v1, v3, p2, p3, p4 }, Landroid/database/sqlite/SQLiteDatabase;->update(Ljava/lang/String;Landroid/content/ContentValues;Ljava/lang/String;[Ljava/lang/String;)I
    move-result v0
    :L1
    .line 199
    .local v0, count:I
    invoke-virtual { p0 }, Lcom/nom/lib/database/FeedDataProvider;->getContext()Landroid/content/Context;
    move-result-object v3
    invoke-virtual { v3 }, Landroid/content/Context;->getContentResolver()Landroid/content/ContentResolver;
    move-result-object v3
    const/4 v4, 0
    invoke-virtual { v3, p1, v4 }, Landroid/content/ContentResolver;->notifyChange(Landroid/net/Uri;Landroid/database/ContentObserver;)V
    .line 203
    return v0
    :L2
    .line 185
    .end local v0
    invoke-virtual { p1 }, Landroid/net/Uri;->getPathSegments()Ljava/util/List;
    move-result-object v3
    const/4 v4, 1
    invoke-interface { v3, v4 }, Ljava/util/List;->get(I)Ljava/lang/Object;
    move-result-object v2
    check-cast v2, Ljava/lang/String;
    .line 186
    .local v2, rowId:Ljava/lang/String;
    const-string v3, "feeds"
    .line 188
    new-instance v4, Ljava/lang/StringBuilder;
    const-string v5, "_id="
    invoke-direct { v4, v5 }, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V
    invoke-virtual { v4, v2 }, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
    move-result-object v4
    .line 189
    invoke-static { p3 }, Landroid/text/TextUtils;->isEmpty(Ljava/lang/CharSequence;)Z
    move-result v5
    if-nez v5, :L4
    new-instance v5, Ljava/lang/StringBuilder;
    const-string v6, " AND ("
    invoke-direct { v5, v6 }, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V
    invoke-virtual { v5, p3 }, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
    move-result-object v5
    const/16 v6, 41
    invoke-virtual { v5, v6 }, Ljava/lang/StringBuilder;->append(C)Ljava/lang/StringBuilder;
    move-result-object v5
    invoke-virtual { v5 }, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
    move-result-object v5
    :L3
    invoke-virtual { v4, v5 }, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
    move-result-object v4
    .line 188
    invoke-virtual { v4 }, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
    move-result-object v4
    .line 186
    invoke-virtual { v1, v3, p2, v4, p4 }, Landroid/database/sqlite/SQLiteDatabase;->update(Ljava/lang/String;Landroid/content/ContentValues;Ljava/lang/String;[Ljava/lang/String;)I
    move-result v0
    .line 191
    .restart local v0
    goto :L1
    :L4
    .line 189
    .end local v0
    const-string v5, ""
    goto :L3
    .line 178
    :L5
    .packed-switch 1
        :L0
        :L2
    .end packed-switch
.end method
